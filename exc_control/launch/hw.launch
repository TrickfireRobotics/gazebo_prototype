<launch>
  <!-- Load all of the motor controllers -->
  <rosparam file="$(find exc_control)/config/exc_control.yaml" command="load"/>

  <!-- Load the URDF into the ROS Parameter Server, processing macros as we do -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find exc_description)/urdf/exc.xacro'" />

  <!-- Publishes the state of the robot to TF for Rviz or other usages -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="false" output="screen" />

  <!-- Load the controller manager plugin for the drivebase -->
  <node name="controller_launcher" pkg="exc_control" type="controller_launcher" />

  <!-- Start the Arduino interface to communicate with the sensors and motors -->
  <node name="rosserial" pkg="rosserial_python" type="serial_node.py" args="/dev/ttyACM0" />

  <!-- Spawn the controllers -->
  <node name="controller_spawner" pkg="controller_manager" type="spawner"
          args="joint_state_controller
                wheel_fl_velocity_controller
                wheel_fr_velocity_controller
                wheel_rl_velocity_controller
                wheel_rr_velocity_controller
                arm_position_controller --shutdown-timeout 1"/>

  <node name="diff_drive" pkg="exc_control" type="diff_drive" />
</launch>
